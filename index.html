<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="https://nathan2020-0126.github.io/SerenityMannual/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/SerenityMannual/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/SerenityMannual/css/style.css">

<meta name="generator" content="Hexo 4.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/SerenityMannual/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/SerenityMannual/">Home</a>
        
          <a class="main-nav-link" href="/SerenityMannual/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/SerenityMannual/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://nathan2020-0126.github.io/SerenityMannual"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-图片测试" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/SerenityMannual/2020/02/04/%E5%9B%BE%E7%89%87%E6%B5%8B%E8%AF%95/" class="article-date">
  <time datetime="2020-02-04T12:19:44.326Z" itemprop="datePublished">2020-02-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/SerenityMannual/2020/02/04/%E5%9B%BE%E7%89%87%E6%B5%8B%E8%AF%95/">图片测试</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>d’d’drrrrrwwrw444555</p>
<p><img src="/SerenityMannual/2020/02/04/%E5%9B%BE%E7%89%87%E6%B5%8B%E8%AF%95/image-20200205071654050.png" alt="image-20200205071654050"></p>
<p><img src="/SerenityMannual/2020/02/04/%E5%9B%BE%E7%89%87%E6%B5%8B%E8%AF%95/image-20200205072003694.png" alt="image-20200205072003694"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://nathan2020-0126.github.io/SerenityMannual/2020/02/04/%E5%9B%BE%E7%89%87%E6%B5%8B%E8%AF%95/" data-id="ck67uox6t00015stp7sfhgpq6" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Dialog中的方法" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/SerenityMannual/2020/02/04/Dialog%E4%B8%AD%E7%9A%84%E6%96%B9%E6%B3%95/" class="article-date">
  <time datetime="2020-02-03T16:00:00.000Z" itemprop="datePublished">2020-02-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/SerenityMannual/2020/02/04/Dialog%E4%B8%AD%E7%9A%84%E6%96%B9%E6%B3%95/">Dialog中的方法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a><strong>构造函数</strong></h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">constructor</span>(<span class="params">container: JQuery</span>) &#123;</span><br><span class="line">            <span class="keyword">super</span>(container);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">this</span>.adjustLineGrid = <span class="keyword">new</span> AdjustLineGrid(<span class="keyword">this</span>.byId(<span class="string">'InventoryAdjustGrid'</span>));</span><br><span class="line">            <span class="keyword">this</span>.adjustLineGrid.element.flexHeightOnly(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">this</span>.form.InventoryAdjustTypeId.changeSelect2(<span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">this</span>.form.InventoryAdjustTypeId.value == <span class="string">"1"</span>) &#123;</span><br><span class="line">                    $(<span class="string">".s-InventoryAdjustDialog"</span>).find(<span class="string">".field.StockLocationId"</span>).show();</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    $(<span class="string">".s-InventoryAdjustDialog"</span>).find(<span class="string">".field.StockLocationId"</span>).hide();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>

<h3 id="LoadEntity"><a href="#LoadEntity" class="headerlink" title="LoadEntity"></a><strong>LoadEntity</strong></h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">loadEntity(entity: InventoryAdjustRow) &#123;</span><br><span class="line">            <span class="keyword">super</span>.loadEntity(entity);</span><br><span class="line">            <span class="keyword">var</span> self = <span class="keyword">this</span>;</span><br><span class="line">            <span class="keyword">if</span> (entity.InventoryAdjustTypeId == <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">this</span>.element.find(<span class="string">".field.StockLocationId"</span>).show();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (!self.isNew()) &#123;</span><br><span class="line">                <span class="keyword">if</span> (entity.InventoryStatusId == <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">this</span>.element.find(<span class="string">".tool-button.confirm-button"</span>).removeClass(<span class="string">"hide"</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (!<span class="keyword">this</span>.element.find(<span class="string">".tool-button.confirm-button"</span>).hasClass(<span class="string">"hide"</span>)) &#123;</span><br><span class="line">                        <span class="keyword">this</span>.element.find(<span class="string">".tool-button.confirm-button"</span>).addClass(<span class="string">"hide"</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                    Serenity.EditorUtils.setReadonly(<span class="keyword">this</span>.element.find(<span class="string">'.editor'</span>), <span class="literal">true</span>);</span><br><span class="line">                    </span><br><span class="line">                    self.saveAndCloseButton.hide();</span><br><span class="line">                    self.applyChangesButton.hide();</span><br><span class="line">                &#125;               </span><br><span class="line">                <span class="keyword">if</span> (entity.InventoryStatusId == <span class="number">3</span>) &#123;</span><br><span class="line">                    <span class="keyword">this</span>.element.find(<span class="string">".s-DialogToolbar"</span>).addClass(<span class="string">"hide"</span>);                 </span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            Serenity.TabsExtensions.setDisabled(<span class="keyword">this</span>.tabs, <span class="string">'Orders'</span>, <span class="keyword">this</span>.entity.InventoryStatusId == <span class="number">0</span>);</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.entity.InventoryStatusId &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                Serenity.TabsExtensions.selectTab(<span class="keyword">this</span>.tabs, <span class="string">'Orders'</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">this</span>.adjustLineGrid.inventoryEntity = entity;</span><br><span class="line">            <span class="keyword">this</span>.adjustLineGrid.myCallback = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                self.reloadById();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>

<h3 id="加入Button"><a href="#加入Button" class="headerlink" title="加入Button"></a><strong>加入Button</strong></h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> getToolbarButtons(): Serenity.ToolButton[] &#123;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">let</span> buttons = <span class="keyword">super</span>.getToolbarButtons();</span><br><span class="line">            <span class="keyword">var</span> self = <span class="keyword">this</span>;</span><br><span class="line">            buttons.push(&#123;</span><br><span class="line">                title: Q.text(<span class="string">"Db.Stock.InventoryAdjust.StartInventory"</span>),</span><br><span class="line">                cssClass: <span class="string">'confirm-button hide'</span>,              </span><br><span class="line">                onClick: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (self.entity.InventoryAdjustTypeId == <span class="number">1</span>)<span class="comment">//AllProductOfOneLocation</span></span><br><span class="line">                    &#123;</span><br><span class="line">                        self.creatInventoryLineByLocationId(<span class="keyword">this</span>.entityId, <span class="keyword">this</span>.entity.StockLocationId);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        self.setInventoryAdjustStatus(<span class="keyword">this</span>.entityId, <span class="number">1</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                    </span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);         </span><br><span class="line">            <span class="keyword">return</span> buttons;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>

<h3 id="增加表单验证"><a href="#增加表单验证" class="headerlink" title="增加表单验证"></a>增加表单验证</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.form.Password.addValidationRule(<span class="keyword">this</span>.uniqueName, <span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">this</span>.form.Password.value.length &lt; <span class="number">7</span>)</span><br><span class="line">                    <span class="keyword">return</span> <span class="string">"Password must be at least 7 characters!"</span>;</span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="keyword">this</span>.form.PasswordConfirm.addValidationRule(<span class="keyword">this</span>.uniqueName, <span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">this</span>.form.Password.value != <span class="keyword">this</span>.form.PasswordConfirm.value)</span><br><span class="line">                    <span class="keyword">return</span> <span class="string">"The passwords entered doesn't match!"</span>;</span><br><span class="line">            &#125;);</span><br></pre></td></tr></table></figure>

<h3 id="Dialog设置只读模式"><a href="#Dialog设置只读模式" class="headerlink" title="Dialog设置只读模式"></a>Dialog设置只读模式</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> updateInterface(): <span class="built_in">void</span> &#123;</span><br><span class="line">            <span class="keyword">super</span>.updateInterface();</span><br><span class="line">            Serenity.EditorUtils.setReadonly(<span class="keyword">this</span>.element.find(<span class="string">'.editor'</span>), <span class="literal">true</span>);</span><br><span class="line">            <span class="keyword">this</span>.element.find(<span class="string">'sup'</span>).hide();</span><br><span class="line">            <span class="keyword">this</span>.toolbar.element.hide();</span><br><span class="line">             <span class="keyword">this</span>.element.find(<span class="string">".add-button"</span>).remove();</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>

<h3 id="getDialogOptions"><a href="#getDialogOptions" class="headerlink" title="getDialogOptions"></a>getDialogOptions</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> getDialogOptions(): JQueryUI.DialogOptions &#123;</span><br><span class="line">            <span class="keyword">let</span> opt = <span class="keyword">super</span>.getDialogOptions();</span><br><span class="line">            opt.height = <span class="number">800</span>;</span><br><span class="line">            opt.width = <span class="number">500</span>;</span><br><span class="line">            <span class="keyword">return</span> opt;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> DialogOptions <span class="keyword">extends</span> DialogEvents &#123;</span><br><span class="line">        autoOpen?: <span class="built_in">boolean</span>;</span><br><span class="line">        buttons?: &#123; [buttonText: <span class="built_in">string</span>]: <span class="function">(<span class="params">event?: Event</span>) =&gt;</span> <span class="built_in">void</span> &#125; | DialogButtonOptions[];</span><br><span class="line">        closeOnEscape?: <span class="built_in">boolean</span>;</span><br><span class="line">        classes?: DialogClasses;</span><br><span class="line">        closeText?: <span class="built_in">string</span>;</span><br><span class="line">        appendTo?: <span class="built_in">string</span>;</span><br><span class="line">        dialogClass?: <span class="built_in">string</span>;</span><br><span class="line">        disabled?: <span class="built_in">boolean</span>;</span><br><span class="line">        draggable?: <span class="built_in">boolean</span>;</span><br><span class="line">        height?: <span class="built_in">number</span> | <span class="built_in">string</span>;</span><br><span class="line">        hide?: <span class="built_in">boolean</span> | <span class="built_in">number</span> | <span class="built_in">string</span> | DialogShowHideOptions;</span><br><span class="line">        maxHeight?: <span class="built_in">number</span>;</span><br><span class="line">        maxWidth?: <span class="built_in">number</span>;</span><br><span class="line">        minHeight?: <span class="built_in">number</span>;</span><br><span class="line">        minWidth?: <span class="built_in">number</span>;</span><br><span class="line">        modal?: <span class="built_in">boolean</span>;</span><br><span class="line">        position?: <span class="built_in">any</span>; <span class="comment">// object, string or []</span></span><br><span class="line">        resizable?: <span class="built_in">boolean</span>;</span><br><span class="line">        show?: <span class="built_in">boolean</span> | <span class="built_in">number</span> | <span class="built_in">string</span> | DialogShowHideOptions;</span><br><span class="line">        stack?: <span class="built_in">boolean</span>;</span><br><span class="line">        title?: <span class="built_in">string</span>;</span><br><span class="line">        width?: <span class="built_in">any</span>; <span class="comment">// number or string</span></span><br><span class="line">        zIndex?: <span class="built_in">number</span>;</span><br><span class="line"></span><br><span class="line">		open?: DialogEvent;</span><br><span class="line">        close?: DialogEvent;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="设置RowEditor的高度"><a href="#设置RowEditor的高度" class="headerlink" title="设置RowEditor的高度"></a>设置RowEditor的高度</h3>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://nathan2020-0126.github.io/SerenityMannual/2020/02/04/Dialog%E4%B8%AD%E7%9A%84%E6%96%B9%E6%B3%95/" data-id="ck67uk6a60000kotp0a0eeaxw" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-React" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/SerenityMannual/2020/02/04/React/" class="article-date">
  <time datetime="2020-02-03T16:00:00.000Z" itemprop="datePublished">2020-02-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/SerenityMannual/2020/02/04/React/">React</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="条件渲染"><a href="#条件渲染" class="headerlink" title="条件渲染"></a>条件渲染</h2><h3 id="元素条件"><a href="#元素条件" class="headerlink" title="元素条件"></a>元素条件</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Mailbox</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> unreadMessages = props.unreadMessages;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h1&gt;Hello!&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">      &#123;unreadMessages.length &gt; 0 &amp;&amp;</span></span><br><span class="line"><span class="regexp">        &lt;h2&gt;</span></span><br><span class="line"><span class="regexp">          您有 &#123;unreadMessages.length&#125; 条未读信息。</span></span><br><span class="line"><span class="regexp">        &lt;/</span>h2&gt;</span><br><span class="line">      &#125;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"> </span></span><br><span class="line"><span class="regexp">const messages = ['React', 'Re: React', 'Re:Re: React'];</span></span><br><span class="line"><span class="regexp">ReactDOM.render(</span></span><br><span class="line"><span class="regexp">  &lt;Mailbox unreadMessages=&#123;messages&#125; /</span>&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">'example'</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>



<p>三目运算符</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">render() &#123;</span><br><span class="line">  <span class="keyword">const</span> isLoggedIn = <span class="keyword">this</span>.state.isLoggedIn;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &#123;isLoggedIn ? (</span><br><span class="line">        &lt;LogoutButton onClick=&#123;<span class="keyword">this</span>.handleLogoutClick&#125; /&gt;</span><br><span class="line">      ) : (</span><br><span class="line">        &lt;LoginButton onClick=&#123;<span class="keyword">this</span>.handleLoginClick&#125; /&gt;</span><br><span class="line">      )&#125;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="https://nathan2020-0126.github.io/SerenityMannual/2020/02/04/React/" data-id="ck67uk6af0002kotp9zgi11he" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Grid中的方法" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/SerenityMannual/2020/02/02/Grid%E4%B8%AD%E7%9A%84%E6%96%B9%E6%B3%95/" class="article-date">
  <time datetime="2020-02-02T02:32:38.049Z" itemprop="datePublished">2020-02-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/SerenityMannual/2020/02/02/Grid%E4%B8%AD%E7%9A%84%E6%96%B9%E6%B3%95/">Grid中的方法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="getButtons"><a href="#getButtons" class="headerlink" title="getButtons"></a>getButtons</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> getButtons(): Serenity.ToolButton[] &#123;</span><br><span class="line">    <span class="keyword">var</span> buttons = <span class="keyword">super</span>.getButtons();</span><br><span class="line">    buttons[Q.indexOf(buttons, <span class="function"><span class="params">x</span> =&gt;</span> x.cssClass == <span class="string">"add-button"</span>)].title = <span class="string">"Insert SalesOrder into monthly Plan"</span>;</span><br><span class="line">    buttons.splice(Q.indexOf(buttons, <span class="function"><span class="params">x</span> =&gt;</span> x.cssClass == <span class="string">"add-button"</span>), <span class="number">1</span>);</span><br><span class="line">    buttons.push(&#123;</span><br><span class="line">        title: <span class="string">'Save Changes'</span>,</span><br><span class="line">        cssClass: <span class="string">'apply-changes-button disabled'</span>,</span><br><span class="line">        onClick: <span class="function"><span class="params">e</span> =&gt;</span> <span class="keyword">this</span>.saveClick(),</span><br><span class="line">        separator: <span class="literal">true</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> buttons;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="去除Title"><a href="#去除Title" class="headerlink" title="去除Title"></a>去除Title</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">constructor</span>(<span class="params">container: JQuery</span>) &#123;</span><br><span class="line">           <span class="keyword">super</span>(container);</span><br><span class="line">           <span class="keyword">this</span>.setTitle(<span class="string">""</span>);</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>

<h3 id="EditItem"><a href="#EditItem" class="headerlink" title="EditItem"></a>EditItem</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">        * This method is called for columns with [EditLink] attribute,</span></span><br><span class="line"><span class="comment">        * but only for edit links of this grid's own item type.</span></span><br><span class="line"><span class="comment">        * It is also called by Add Product button with a NULL entityOrId</span></span><br><span class="line"><span class="comment">        * parameter so we should check that entityOrId is a string</span></span><br><span class="line"><span class="comment">        * to be sure it is originating from a link.</span></span><br><span class="line"><span class="comment">        *</span></span><br><span class="line"><span class="comment">        * As we changed format for other columns, this will only be called</span></span><br><span class="line"><span class="comment">        * for links in remaining OrderID column</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">       <span class="keyword">protected</span> editItem(entityOrId) &#123;</span><br><span class="line">           <span class="comment">// check that this is an edit link click, not add button, ID is always a string</span></span><br><span class="line">           <span class="keyword">if</span> (<span class="keyword">typeof</span> entityOrId == <span class="string">"string"</span>) &#123;</span><br><span class="line">               <span class="comment">// convert ID to an integer, and find order with that ID</span></span><br><span class="line">               <span class="keyword">var</span> item = <span class="keyword">this</span>.view.getItemById(Q.toId(entityOrId));</span><br><span class="line">               <span class="comment">// date is a ISO string, so need to parse it first</span></span><br><span class="line">               <span class="keyword">var</span> date = Q.formatDate(item.OrderDate);</span><br><span class="line"></span><br><span class="line">               <span class="comment">// ask for confirmation</span></span><br><span class="line">               Q.confirm(Q.format(<span class="string">"You clicked edit link for order with ID: &#123;0&#125; and Date: &#123;1&#125;. Should i open that order?"</span>,</span><br><span class="line">                   item.OrderID, date), <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                       <span class="keyword">new</span> Northwind.OrderDialog().loadByIdAndOpenDialog(item.OrderID);</span><br><span class="line">                   &#125;);</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">else</span> &#123;</span><br><span class="line">               <span class="keyword">super</span>.editItem(entityOrId);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>

<h3 id="onViewSubmit"><a href="#onViewSubmit" class="headerlink" title="onViewSubmit"></a>onViewSubmit</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> onViewSubmit() &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">super</span>.onViewSubmit()) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> request = <span class="keyword">this</span>.view.params <span class="keyword">as</span> Serenity.ListRequest;</span><br><span class="line">    request.Criteria = Serenity.Criteria.and(request.Criteria,</span><br><span class="line">                [[SalesMilestoneTaskStepRow.Fields.ReponsiblePersonUsername], <span class="string">'='</span>, Q.Authorization.username], [<span class="string">'is null'</span>, [SalesMilestoneTaskStepRow.Fields.ActualEndDate], [<span class="string">'is not null'</span>, [SalesMilestoneTaskStepRow.Fields.ActualStartDate]]);</span><br><span class="line">    request.IncludeColumns.push(<span class="string">"CurrentMilestoneTaskRespPersonUserId"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>






      
    </div>
    <footer class="article-footer">
      <a data-url="https://nathan2020-0126.github.io/SerenityMannual/2020/02/02/Grid%E4%B8%AD%E7%9A%84%E6%96%B9%E6%B3%95/" data-id="ck67uk6ae0001kotp09z8gdcu" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/SerenityMannual/2020/02/02/hello-world/" class="article-date">
  <time datetime="2020-02-01T23:03:17.638Z" itemprop="datePublished">2020-02-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/SerenityMannual/2020/02/02/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://nathan2020-0126.github.io/SerenityMannual/2020/02/02/hello-world/" data-id="ck647jss70000fotpf132dpyh" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Serenity介绍" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/SerenityMannual/2020/02/02/Serenity%E4%BB%8B%E7%BB%8D/" class="article-date">
  <time datetime="2020-02-01T16:00:00.000Z" itemprop="datePublished">2020-02-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/SerenityMannual/2020/02/02/Serenity%E4%BB%8B%E7%BB%8D/">Serenity介绍</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Serenity框架介绍"><a href="#Serenity框架介绍" class="headerlink" title="Serenity框架介绍"></a>Serenity框架介绍</h1><p><strong>·</strong> <strong>什么是**</strong>Serenity平台？**</p>
<p>Serenity 是建立在开源技术上的 ASP.NET MVC/Javascript 应用程序平台。</p>
<p><strong>·</strong> <strong>谁适合使用该平台？</strong></p>
<p>Serenity   最适合应用于有大量数据输入的表单业务应用程序，它的功能同样也适用于其他类型的Web应用程序。</p>
<p><strong>·</strong> <strong>示例程序</strong></p>
<p>Visual Studio 搜索模板 Serenity，里面包含Demo。</p>
<p>教程中Github下载 MovieTutorial，建议参考教程理解代码</p>
<p><strong>·</strong> <strong>目录结构</strong>——与ASP.NET MVC的主要文件夹结构进行对比</p>
<table>
<thead>
<tr>
<th><strong>ASP.NET MVC</strong></th>
<th><strong>Serenity</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td>APP_Data</td>
<td></td>
<td>存储应用程序数据</td>
</tr>
<tr>
<td>APP_Start</td>
<td></td>
<td>配置文件</td>
</tr>
<tr>
<td>Content</td>
<td></td>
<td>静态资源文件</td>
</tr>
<tr>
<td>Fonts</td>
<td></td>
<td>字体文件</td>
</tr>
<tr>
<td>Scripts</td>
<td></td>
<td>脚本文件</td>
</tr>
<tr>
<td>Views</td>
<td></td>
<td>视图层（Serenity仅为视图模板）</td>
</tr>
<tr>
<td>Controllers</td>
<td>-</td>
<td>控制器</td>
</tr>
<tr>
<td>Models</td>
<td>-</td>
<td>模型</td>
</tr>
<tr>
<td>-</td>
<td>Modules</td>
<td>MVC架构的模块代码</td>
</tr>
<tr>
<td>-</td>
<td>tools</td>
<td>工具如NodeJS</td>
</tr>
<tr>
<td><strong>-</strong></td>
<td>Imports/ Migrations等</td>
<td>这些文件夹也可以归于Modules/Common文件夹中</td>
</tr>
</tbody></table>
<p><strong>·</strong> <strong>Serenity中的Modules目录结构</strong></p>
<table>
<thead>
<tr>
<th><strong>文件/目录</strong></th>
<th><strong>文件/子目录</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td>_ViewStart.cshtml</td>
<td>-</td>
<td>母版页</td>
</tr>
<tr>
<td>Texts.cs</td>
<td>-</td>
<td>C#端的文本资源</td>
</tr>
<tr>
<td>Web.config</td>
<td>-</td>
<td>配置文件</td>
</tr>
<tr>
<td>Common</td>
<td>-</td>
<td>公共文件目录</td>
</tr>
<tr>
<td></td>
<td>ScriptInitialization.ts</td>
<td>全局JS初始化配置</td>
</tr>
<tr>
<td></td>
<td>Imports</td>
<td>TT模板文件（用于TS智能提示）</td>
</tr>
<tr>
<td></td>
<td>Migrations</td>
<td>数据库迁移文件（类似EF Code First）</td>
</tr>
<tr>
<td></td>
<td>Navigation</td>
<td>页面导航信息</td>
</tr>
<tr>
<td></td>
<td>Helpers</td>
<td>辅助类</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th></th>
<th>Reporting</th>
<th>导出类</th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td>File</td>
<td>下载类</td>
</tr>
<tr>
<td></td>
<td>UserPreference</td>
<td>用户配置信息相关</td>
</tr>
<tr>
<td></td>
<td>Dashboard</td>
<td>登陆首页仪表板</td>
</tr>
<tr>
<td>各个业务模块</td>
<td>实体（文件夹）*</td>
<td>实体对应数据表名</td>
</tr>
<tr>
<td></td>
<td>实体Row.cs*</td>
<td>M层 对应数据表字段</td>
</tr>
<tr>
<td></td>
<td>实体Repository.cs*</td>
<td>M层 存储仓库存储过程</td>
</tr>
<tr>
<td></td>
<td>实体Index.cshtml*</td>
<td>V层 业务页面</td>
</tr>
<tr>
<td></td>
<td>实体Grid.ts*</td>
<td>V层 表格样式，一般用来控制与展示查询</td>
</tr>
<tr>
<td></td>
<td>实体Dialog.ts*</td>
<td>V层 模态框样式，一般用来展示增删改表单。也可以是自定义模态框。</td>
</tr>
<tr>
<td></td>
<td>实体Page.cs*</td>
<td>C层 即Controller一般用于响应前端http访问请求，调用cshtml页面</td>
</tr>
<tr>
<td></td>
<td>实体Endpoint.cs*</td>
<td>C层 即Controller一般用于响应前端AJAX通讯请求，返回数据</td>
</tr>
<tr>
<td></td>
<td>实体Columns.cs*</td>
<td>C层 用来控制表格显示</td>
</tr>
<tr>
<td></td>
<td>实体Forms.cs*</td>
<td>C层 用来控制表单显示</td>
</tr>
<tr>
<td></td>
<td>其它</td>
<td>C层其它类，用于辅助格式转换，文件导入导出等</td>
</tr>
</tbody></table>
<p>说明：</p>
<p>带*号为sergen自动生成代码，可以更具需要删减或增加各业务模块的代码，如有复杂的交互功能，需要增加C层代码，   如不需要相关页面，可以删减VC层代码。</p>
<p><strong>·</strong> <strong>一些常用的特性（待补充）</strong></p>
<table>
<thead>
<tr>
<th><strong>C#【特性】</strong></th>
<th><strong>类别</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td>[NotNull]</td>
<td>数据库</td>
<td>字段不为空</td>
</tr>
<tr>
<td>[DefaultValue(…)]</td>
<td>数据库</td>
<td>默认值</td>
</tr>
<tr>
<td>[ForeignKey(“db”, “key”)]</td>
<td>数据库</td>
<td>指定外键</td>
</tr>
<tr>
<td>[LeftJoin(“…”)]</td>
<td>数据库</td>
<td>左连接查询，括号中指定关联表代号</td>
</tr>
<tr>
<td>[Expression(“…”)]</td>
<td>数据库</td>
<td>SQL表达式，本表用T0表示，关联表用对应的代号，表示该值为 服务端计算的值</td>
</tr>
<tr>
<td>[LinkingSetRelation(typeof(…),”…”,”…”)]</td>
<td>数据库</td>
<td>两个表是一对多关系，1）映射行的类型，2）匹配该行的属性 名，3）该行中关联的字段属性名称</td>
</tr>
<tr>
<td>[DisplayName(“…”)]</td>
<td>UI全局</td>
<td>UI显示的信息</td>
</tr>
<tr>
<td>[Size(…)]</td>
<td>UI表格</td>
<td>表格中列的宽度</td>
</tr>
<tr>
<td>[QuickSearch( SearchType.StartsWith/Equals/…)]</td>
<td>UI表格</td>
<td>表格顶部快速搜索，括号内主要是比对规则，可省略</td>
</tr>
<tr>
<td>[QuickFilter]</td>
<td>UI表格</td>
<td>表格的快速过滤器</td>
</tr>
<tr>
<td>[AlignRight/Left/…]</td>
<td>UI表格</td>
<td>对齐方式</td>
</tr>
<tr>
<td>[TextAreaEditor(Rows=…)]</td>
<td>UI表单</td>
<td>表单用多行输入框</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>[LookupEditor(typeof(…), InplaceAdd=true,Mupltiple=true…)]</th>
<th>UI表单</th>
<th>表单用可搜索下拉框，可配置属性如多选，可在新窗口新增项等等。</th>
</tr>
</thead>
<tbody><tr>
<td>[MasterDetailRelation(foreignKey: “…”, IncludeColumns=”…”)]</td>
<td>UI表单</td>
<td>主从关系，级联下拉框查询</td>
</tr>
<tr>
<td>Updatable(false)</td>
<td>UI表单</td>
<td>只读不可更新</td>
</tr>
<tr>
<td>Insertable(false)</td>
<td>UI表单</td>
<td>只读不可修改</td>
</tr>
<tr>
<td>HideOnInsert</td>
<td>UI表单</td>
<td>新增时隐藏</td>
</tr>
<tr>
<td>Trim/TrimToEmpty</td>
<td>UI表单</td>
<td>字串去空格，前者会变成null而后者为Empty</td>
</tr>
<tr>
<td>ImageUploadEditor/ MultipleImageUploadEditor( FilenameFormat=”…”)</td>
<td>UI表单</td>
<td>图片上传，前者为单张，后者为多张</td>
</tr>
</tbody></table>
<p><strong>代码生成器</strong> <strong>Sergen</strong> 使用步骤</p>
<p>ViewàOther WindowsàPackage Manager Console</p>
<p>在控制台中输入sergen启动</p>
<p><img src="D:%5C%E6%9C%89%E9%81%93%E4%BA%91%E7%AC%94%E8%AE%B0%E6%95%B0%E6%8D%AE%5Ca113729396@126.com%5Cfb33aa25c03d4a02abda1855dc58f898%5Cwps1.png" alt="img"></p>
<p>选择Connection  String，即根目录下Web.Config中配置的连接字符串。选中对应业务的数据表。</p>
<p>点击Generate Code for Checked Entities生成代码。VS会弹窗提示外部变更，选择覆盖。</p>
<p>回到Solution Explorer（资源管理器）窗体中，点击Show  All  Files（显示全部）按钮，找到刚刚自动生成的代码，包含进项目。</p>
<p>根据实际需要移动代码目录，增删代码文件，修改代码内容，编辑导航信息等等。</p>
<p>ConnectionKey（连接字符串）设置为选定  web.config  配置文件中连接字符串的连接键。你通常不需要更改它，让其保持默认值。</p>
<p>Entity  Identifier（实体名）这通常对应表名，但是有时候表名含有下划线或其他无效字符，所以需要你决定如何生成代码中的实体名称（一个有效的标识名称）。</p>
<p>Permission Key（权限）对资源（页、服务等）的访问控制都是由简单字符串组成的访问许可键（permission keys）控制。这些权限被授予用户（users）或角色（roles）。我们的影片页面只有管理员用户（或者以后的内容编辑）可使用，因   此，现在让我们把它设为 Administration，默认情况下，在 Serene 模板中只有 admin 用户有这个权限。</p>
<p><strong>·</strong> <strong>持久化设置</strong></p>
<p>用于保存用户对网格列表的设置</p>
<p>在ScriptInitialization.ts中开启默认持久化</p>
<p>namespace Serene.ScriptInitialization { Q.Config.responsiveDialogs = true; Q.Config.rootNamespaces.push(‘Serene’);</p>
<p>//在此添加如下</p>
<p>Serenity.DataGrid.defaultPersistanceStorage = window.sessionStorage/ localStorage;</p>
<p>}</p>
<p>sessionStorage这将设置保存到浏览器的会话(session)。当任何浏览器窗口保持打开状态时，将数保存到一个键/值字</p>
<p>典。当用户关闭所有浏览器窗口时，所有的设置都会丢失。localStorage使用浏览器本地存储。在浏览器重新启动之间将保留设置。</p>
<p>教程中还有区分用户的持久化，分别持久化不同表格，更改持久化的目标属性，以及将持久化信息存储到数据库</p>
<p>（UserPreferences表）。</p>
<p>建议采用最后一种存储到数据库的方式，可在不同终端区分用户进行缓存。</p>
<p>/// <reference path= "../Common/UserPreference/UserPreferenceStorage.ts" /> Serenity.DataGrid.defaultPersistanceStorage = new Common.UserPreferenceStorage(); 注意///引用语句应该放在文件头部，namespace之上。</p>
<p><strong>·</strong> <strong>T4</strong> <strong>模板（**</strong>.tt文件）**</p>
<p>Serene 包含一些 T4(.tt) 文件，可以将此类信息从服务器端（C# 中的 rows 等）转移到客户端 （TypeScript） 用于智能提示。</p>
<p>运行这些模板之前，请确保你的解决方案能成功生成，以便模板可使用项目输出的DLL  文件（MovieTutorial.Web.dll） 生成代码。</p>
<p>在生成解决方案之后，点击 生成 菜单，然后选择 转换所有模板。</p>
<p><strong>·</strong> <strong>多国语言</strong></p>
<p>本地字典，前端显示的翻译：</p>
<p>文件位置 Scripts/site/texts文件夹中</p>
<p>文件名命名应遵循 {前缀}.{LanguageID}.json</p>
<p>行字段的本地文本唯一键由 “Db.” + (LocalTextPrefix for Row) + “.” + FieldName 组成。它们的值从字段的 [DisplayName] 特性生成，但也可能是另一种语言的翻译。</p>
<p>LocalTextPrefix 默认情况下相当于 ModuleName + “.” + RowClassName ，但是可以在 Row 构造函数中修改。</p>
<p>C#端文本字典，位置Modules/Texts.cs，对于非系统自动生成的自定义文本，需要在此登记。</p>
<p>框架自带的文本翻译文字位于Scripts/serenity/texts文件夹中</p>
<p>· 表格UI相关</p>
<p>在实体Grid.ts中，可以进行如下操作增加/删除快速过滤器</p>
<p>protected getQuickFilters() {</p>
<p>var filters = super.getQuickFilters(); filters.removeAt/add/push/ splice (); return filters;</p>
<p>}</p>
<p>增加/删除按钮</p>
<p>protected getButtons(){</p>
<p>var buttons = super.getButtons(); buttons.removeAt/add/push/ splice (); return buttons;</p>
<p>}</p>
<p>增加/删除表格列</p>
<p>protected getColumns() {</p>
<p>var columns = super.getColumns(); columns.removeAt/add/push/ splice (); return columns;</p>
<p>}</p>
<p>相关样式，请到site.less中进行编码点击事件</p>
<p>protected override void OnClick(jQueryEvent e, int row, int cell)</p>
<p>{</p>
<p>//检查点击事件是否被基本的网格类处理，防止同样事件被处理再次</p>
<p>base.OnClick(e, row, cell); if (e.IsDefaultPrevented()) return;</p>
<p>//获得点击行的实体 var item = Items[row];</p>
<p>if (J(e.Target).HasClass(“inline-action”))</p>
<p>{</p>
<p>//阻止其默认行为</p>
<p>e.PreventDefault();</p>
<p>if (J(e.Target).HasClass(“delete-row”))</p>
<p>{</p>
<p>//执行删除操作</p>
<p>}</p>
<p>}</p>
<p>}</p>
<p>增加行选择列</p>
<p>public class MyGrid : EntityGrid<MyRow></p>
<p>{</p>
<p>private GridRowSelectionMixin rowSelection;</p>
<p>public MyGrid(jQueryObject container): base(container)</p>
<p>{</p>
<p>rowSelection = new GridRowSelectionMixin(this);</p>
<p>}</p>
<p>protected override List<SlickColumn> GetColumns()</p>
<p>{</p>
<p>var columns = base.GetColumns();</p>
<p>columns.Insert(0, GridRowSelectionMixin.CreateSelectColumn(() =&gt; rowSelection)); return columns;</p>
<p>}</p>
<p>protected override List<ToolButton> GetButtons()</p>
<p>{</p>
<p>var buttons = base.GetButtons(); buttons.Add(new ToolButton</p>
<p>{</p>
<p>CssClass = “tag-button”,</p>
<p>Title = “Do Something With Selected Rows”,</p>
<p>OnClick = delegate</p>
<p>{</p>
<p>var selectedIDs = rowSelection.GetSelectedKeys()</p>
<p>if (selectedIDs.Count == 0)</p>
<p>Q.NotifyWarning(“Please select some rows”);</p>
<p>}</p>
<p>});</p>
<p>else</p>
<p>Q.NotifySuccess(“You have selected “ + selectedIDs.Count + “ row(s) with ID(s): “ + string.Join(“,”, selectedIDs));</p>
<p>return buttons;</p>
<p>}</p>
<p>}</p>
<p>SlickGrid 列的格式化器</p>
<p>在实体Grid.ts旁新增Formatter.ts文件</p>
<p>namespace MovieTutorial.MovieDB {</p>
<p>@Serenity.Decorators.registerFormatter()</p>
<p>export class GenreListFormatter implements Slick.Formatter {</p>
<p>format(ctx: Slick.FormatterContext) {</p>
<p>\TODO</p>
<p>}</p>
<p>}</p>
<p>网址 <a href="https://serenity.is/" target="_blank" rel="noopener">https://serenity.is/</a></p>
<p>Github <a href="https://github.com/volkanceylan/Serenity" target="_blank" rel="noopener">https://github.com/volkanceylan/Serenity</a></p>
<p>手册 <a href="https://volkanceylan.gitbooks.io/serenity-zh-cn" target="_blank" rel="noopener">https://volkanceylan.gitbooks.io/serenity-zh-cn</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://nathan2020-0126.github.io/SerenityMannual/2020/02/02/Serenity%E4%BB%8B%E7%BB%8D/" data-id="ck648d6y200004ctp0g7rgvb0" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Sergen代码生成器" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/SerenityMannual/2020/02/02/Sergen%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8/" class="article-date">
  <time datetime="2020-02-01T16:00:00.000Z" itemprop="datePublished">2020-02-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/SerenityMannual/2020/02/02/Sergen%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8/">Sergen代码生成器</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>官方教程: <a href="https://serenity.is/docs/sergen/code_generator_sergen" target="_blank" rel="noopener">https://serenity.is/docs/sergen/code_generator_sergen</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://nathan2020-0126.github.io/SerenityMannual/2020/02/02/Sergen%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8/" data-id="ck67uk6ag0003kotp12e1clgh" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-开发步骤" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/SerenityMannual/2020/02/02/%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4/" class="article-date">
  <time datetime="2020-02-01T16:00:00.000Z" itemprop="datePublished">2020-02-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/SerenityMannual/2020/02/02/%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4/">开发步骤</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="安装Serenity"><a href="#安装Serenity" class="headerlink" title="安装Serenity"></a>安装Serenity</h3><p>下载VSIX进行安装</p>
<p>路径：<a href="https://visualstudiogallery.msdn.microsoft.com/559ec6fc-feef-4077-b6d5-5a99408a6681" target="_blank" rel="noopener">https://visualstudiogallery.msdn.microsoft.com/559ec6fc-feef-4077-b6d5-5a99408a6681</a></p>
<h3 id="新建Serenity工程"><a href="#新建Serenity工程" class="headerlink" title="新建Serenity工程"></a>新建Serenity工程</h3><p><img src="D:%5C02_%E5%B7%A5%E4%BD%9C%5C03_Typora%E7%AC%94%E8%AE%B0%5CBlog%5Csource_posts%5Cimage-20200202074220548.png" alt="image-20200202074220548"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://nathan2020-0126.github.io/SerenityMannual/2020/02/02/%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4/" data-id="ck67uk6ag0004kotp2i19cb3o" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-在Serenity中添加页签" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/SerenityMannual/2020/02/02/%E5%9C%A8Serenity%E4%B8%AD%E6%B7%BB%E5%8A%A0%E9%A1%B5%E7%AD%BE/" class="article-date">
  <time datetime="2020-02-01T16:00:00.000Z" itemprop="datePublished">2020-02-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/SerenityMannual/2020/02/02/%E5%9C%A8Serenity%E4%B8%AD%E6%B7%BB%E5%8A%A0%E9%A1%B5%E7%AD%BE/">在Sernity中添加页签</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://nathan2020-0126.github.io/SerenityMannual/2020/02/02/%E5%9C%A8Serenity%E4%B8%AD%E6%B7%BB%E5%8A%A0%E9%A1%B5%E7%AD%BE/" data-id="ck67uk6ah0005kotpcd5ab1ch" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Jquery/日期" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/SerenityMannual/2020/02/02/Jquery/%E6%97%A5%E6%9C%9F/" class="article-date">
  <time datetime="2020-02-01T16:00:00.000Z" itemprop="datePublished">2020-02-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/SerenityMannual/2020/02/02/Jquery/%E6%97%A5%E6%9C%9F/">日期</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="常用的日期操作"><a href="#常用的日期操作" class="headerlink" title="常用的日期操作"></a>常用的日期操作</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> today = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line"><span class="comment">//获取当前年</span></span><br><span class="line"><span class="keyword">var</span> year=today.getFullYear();</span><br><span class="line"><span class="comment">//获取当前月</span></span><br><span class="line"><span class="keyword">var</span> month=today.getMonth()+<span class="number">1</span>;</span><br><span class="line"><span class="comment">//获取当前日</span></span><br><span class="line"><span class="keyword">var</span> date=today.getDate(); </span><br><span class="line"><span class="comment">//获取当前小时数(0-23)</span></span><br><span class="line"><span class="keyword">var</span> h=today.getHours();       </span><br><span class="line"><span class="comment">//获取当前分钟数(0-59)</span></span><br><span class="line"><span class="keyword">var</span> m=today.getMinutes();    </span><br><span class="line"><span class="keyword">var</span> s=today.getSeconds();  </span><br><span class="line"><span class="comment">//输出为yyyy-MM-hh格式的字符串</span></span><br><span class="line"><span class="keyword">var</span> orderDate = year+<span class="string">'-'</span>+month+<span class="string">"-"</span>+date;</span><br></pre></td></tr></table></figure>

<h3 id="指定的日期加一天"><a href="#指定的日期加一天" class="headerlink" title="指定的日期加一天"></a>指定的日期加一天</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> addDate = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">'2019-10-31'</span>).getTime() + (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span>));</span><br></pre></td></tr></table></figure>

<h3 id="判断日期大小"><a href="#判断日期大小" class="headerlink" title="判断日期大小"></a>判断日期大小</h3>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://nathan2020-0126.github.io/SerenityMannual/2020/02/02/Jquery/%E6%97%A5%E6%9C%9F/" data-id="ck67uk6ao0006kotp4zil5tpx" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/SerenityMannual/archives/2020/02/">February 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/SerenityMannual/2020/02/04/%E5%9B%BE%E7%89%87%E6%B5%8B%E8%AF%95/">图片测试</a>
          </li>
        
          <li>
            <a href="/SerenityMannual/2020/02/04/Dialog%E4%B8%AD%E7%9A%84%E6%96%B9%E6%B3%95/">Dialog中的方法</a>
          </li>
        
          <li>
            <a href="/SerenityMannual/2020/02/04/React/">React</a>
          </li>
        
          <li>
            <a href="/SerenityMannual/2020/02/02/Grid%E4%B8%AD%E7%9A%84%E6%96%B9%E6%B3%95/">Grid中的方法</a>
          </li>
        
          <li>
            <a href="/SerenityMannual/2020/02/02/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/SerenityMannual/" class="mobile-nav-link">Home</a>
  
    <a href="/SerenityMannual/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/SerenityMannual/fancybox/jquery.fancybox.css">

  
<script src="/SerenityMannual/fancybox/jquery.fancybox.pack.js"></script>




<script src="/SerenityMannual/js/script.js"></script>




  </div>
</body>
</html>